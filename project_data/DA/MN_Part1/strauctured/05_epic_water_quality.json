{
  "title": "Water Source Quality Assessment",
  "description": "Understanding water quality scores and identifying data anomalies",
  "estimated_minutes": 30,
  "priority": 0,
  "dependencies": ["Unpack the Visits"],
  "learning_objectives": [
    {
      "level": "apply",
      "description": "Apply multiple conditions in WHERE clauses using AND"
    },
    {
      "level": "analyze",
      "description": "Analyze data for logical inconsistencies and potential errors"
    }
  ],
  "content": "The quality of our water sources is the whole point of this survey. We have a table that contains a quality score for each visit made about a water source that was assigned by a Field surveyor. They assigned a score to each source from 1, being terrible, to 10 for a good, clean water source in a home. Shared taps are not rated as high, and the score also depends on how long the queue times are.",
  "tasks": [
    {
      "title": "Explore the water_quality table",
      "description": "Examine the water_quality table structure and understand scoring",
      "estimated_minutes": 10,
      "priority": 0,
      "learning_objectives": [
        {
          "level": "understand",
          "description": "Understand how water quality is scored and recorded"
        }
      ],
      "content": "The quality of water sources is a pretty big deal. We'll turn to the water_quality table to find records where the subjective_quality_score is within a certain range and the visit_count is above a certain threshold.",
      "subtasks": [
        {
          "title": "Query the water_quality table",
          "subtask_type": "exercise",
          "description": "Explore the water_quality table to see its structure",
          "estimated_minutes": 5,
          "acceptance_criteria": "- Query uses SELECT * FROM water_quality\n- Student can identify columns: record_id, subjective_quality_score, visit_count\n- Student understands the scoring system (1-10)",
          "content": "Look through the table records to find the water quality table.\n\n**Expected query:**\n```sql\nSELECT *\nFROM water_quality\n```",
          "learning_objectives": [
            {
              "level": "understand",
              "description": "Understand the water_quality table structure"
            }
          ]
        }
      ]
    },
    {
      "title": "Find quality score anomalies",
      "description": "Identify records where perfect scores appear for sources that were visited multiple times",
      "estimated_minutes": 20,
      "priority": 0,
      "dependencies": ["Explore the water_quality table"],
      "learning_objectives": [
        {
          "level": "apply",
          "description": "Apply AND to combine multiple WHERE conditions"
        },
        {
          "level": "analyze",
          "description": "Analyze data for logical inconsistencies"
        }
      ],
      "content": "Let's check if this is true. The surveyors only made multiple visits to shared taps and did not revisit other types of water sources. So there should be no records of second visits to locations where there are good water sources, like taps in homes.",
      "subtasks": [
        {
          "title": "Discuss why this query matters",
          "subtask_type": "conversational",
          "description": "Understand the logic behind looking for score 10 with visit_count 2",
          "estimated_minutes": 5,
          "content": "Think about this logic:\n- Only shared taps were visited multiple times (visit_count > 1)\n- Home taps (the best sources) should have score 10\n- But home taps were only visited once\n\nSo if we find records with score 10 AND visit_count = 2, something is wrong - either the score or the classification.",
          "learning_objectives": [
            {
              "level": "analyze",
              "description": "Analyze the logic of data validation queries"
            }
          ]
        },
        {
          "title": "Write query to find anomalies",
          "subtask_type": "exercise",
          "description": "Find records where subjective_quality_score = 10 AND visit_count = 2",
          "estimated_minutes": 10,
          "dependencies": ["Discuss why this query matters"],
          "acceptance_criteria": "- Query uses WHERE with AND to combine both conditions\n- Query returns 218 suspicious rows\n- Student understands why these records indicate errors",
          "content": "So please write a query to find records where the subjective_quality_score is 10 -- only looking for home taps -- and where the source was visited a second time. What will this tell us?\n\n**Expected query:**\n```sql\nSELECT *\nFROM water_quality\nWHERE visit_count = 2\nAND subjective_quality_score = 10\n```\n\nI get 218 rows of data. But this should not be happening! I think some of our employees may have made mistakes. To be honest, I'll be surprised if there are no errors in our data at this scale! I'm going to send Pres. Naledi a message that we have to recheck some of these sources. We can appoint an Auditor to check some of the data independently, and make sure we have the right information!",
          "learning_objectives": [
            {
              "level": "apply",
              "description": "Apply AND operator to combine multiple conditions"
            },
            {
              "level": "analyze",
              "description": "Analyze data for logical inconsistencies"
            }
          ],
          "tutor_guidance": {
            "answer_rationale": "Visit count = 2 is a crude filter to limit the results to shared_tap, since they were the only type visited more than once. These taps should not have a perfect 10 score, because they are not tap_in_home. Both conditions must be true for the results. This fetches all of the records where employees made errors.",
            "common_mistakes": [
              "Using OR instead of AND",
              "Forgetting that both conditions must be true"
            ],
            "discussion_prompts": [
              "Why would shared taps never deserve a score of 10?",
              "What should we do about these 218 suspicious records?"
            ]
          }
        }
      ]
    }
  ]
}
